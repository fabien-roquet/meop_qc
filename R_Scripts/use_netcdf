
# for nectdf file
library(ncdf4)
library(ncdf4.helpers)
# for plot
library(ggplot2)
# for Analysis Oceanographic Data
library(devtools)

getwd()
workdir <- "D:/MEOP/MEOP-CTD/final_dataset_prof/FRANCE/ft18/"
setwd(workdir)
file="ft18-13f-13_hr0_prof.nc"
# load file
nc=nc_open(file)
nc

#all var in ncdf
list_variabl=attributes(nc$var)$names
#or 
var.list <- nc.get.variable.list(nc)

# get global attributes
list_global=ncatt_get(nc,0)
name_global_att=attributes(list_global)$names
num_ts=ncatt_get(nc,0,'number_of_ts_profiles')
num_ts


#get value with ncvar_get
date_create <- ncvar_get(nc, 'DATE_CREATION')
date_create

# to start specific line
lon<-ncvar_get(nc, 'LONGITUDE')
dim(lon)

lon<-ncvar_get(nc, 'LONGITUDE',start=10)
dim(lon)

# to keep specific number of line
lon<-ncvar_get(nc, 'LONGITUDE',count=10) #here we start at line 1 to 10
lon




# load list of variable
list_load=c("LONGITUDE","LATITUDE","TEMP","JULD")
#to load all variable
list_load=list_variabl
MQC=list()
for (i in 1:length(list_load)){
temp_var=ncvar_get(nc,list_load[i])
MQC[[list_load[i]]]=temp_var
}
#need to close ncfile
nc_close(nc)
# structure of MQC
str(MQC)

# plot T/P profil
plot(MQC$TEMP[,101],MQC$PRES[,101],"l")

# plot seal trajectory
plot(MQC$LONGITUDE,MQC$LATITUDE,"l")






